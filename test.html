<!DOCTYPE html>
<html>

<head>
    <link rel="stylesheet" href="/test.css">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <div id="header"></div>

</head>

<body>
    <div id="main-test">
        <img></img>
        <h1>แบบทดสอบดัชนีชี้วัดความสุขคนไทยฉบับสั้น</h1>
        <h2>กรุณาเลือกคำตอบในช่องที่มีข้อความตรงกับท่านมากที่สุด</h2>
        <p>สำหรับแบบประเมินนี้เป็นแบบประเมินที่ผ่านการศึกษา<br>
            ในขั้นตอนที่สมบูณ์และเผยแพร่ในระดับประเทศแล้ว <br>
            แต่หากต้องการการประเมินที่มีรายละเอียดมากกว่านี้ <br>
            สามารถศึกษาโดยใช้ดัชนี้ชี้วัดความสุขคนไทยฉบับสมบูรณ์ได้</p>
        <button onclick="enterToExplanation()">เข้าสู่ทำแบบทดสอบ</button>
    </div>

    <div id="explanation">
        <h1>คำชี้แจง :</h1>
        <p>กรุณาเลือกคำตอบในช่องที่มีข้อความตรงกับตัวท่านมากที่สุดและขอความร่วมมือตอบคำถามทุกข้อ<br>
            คำถามต่อไปนี้จะถามถึงประสบการณ์ของท่านในช่วง 1 เดือนที่ผ่านมาจนถึงปัจจุบัน<br>
            ให้ท่านสำรวจตัวท่านเองและประเมินเหตุการณ์ อาการหรือความคิดเห็นและความรู้สึกของท่านว่าอยู่ในระดับใด
            โดยคำตอบจะมี 4 ตัวเลือก คือ</p>

        <li><span>มากที่สุด</span> หมายถึง เคยมีเหตุการณ์ อาการ ความรู้สึกในเรื่องนั้น ๆ มากที่สุด <span>หรือเห็นด้วย
                กับเรื่องนั้น ๆ มากที่สุด</span></li>
        <li><span>มาก</span> หมายถึง เคยมีเหตุการณ์ อาการ ความรู้สึกในเรื่องนั้น ๆ มาก <span>หรือเห็นด้วยกับเรื่องนั้น ๆ
                มาก</span></li>
        <li><span>เล็กน้อย</span> หมายถึง เคยมีเหตุการณ์ อาการ ความรู้สึกในเรื่องนั้น ๆ เพียงเล็กน้อย
            <span>หรือเห็นด้วยกับเรื่องนั้น ๆ เพียงเล็กน้อย</span></li>
        <li><span>ไม่เลย</span> หมายถึง ไม่เคยมีเหตุการณ์ อาการ ความรู้สึก <span>หรือไม่เห็นด้วยกับเรื่องนั้น ๆ </span>
        </li>
        <button onclick="user()">ถัดไป ></button>
    </div>
    <div id="data-user">
        <p>กรุณาระบุรายละเอียดของคุณ ให้ครบด้วยค่ะ</p>
        <div>
            <label for="sex">เพศ :<br></label>
            <select id="sex" onclick="sex(this.value)">
                <option selected>กรุณาเลือก</option>
                <option value="male">ชาย</option>
                <option value="female">หญิง</option>
            </select>
            <br>
            <label for="age">อายุ :<br></label>
            <select id="age" onclick="age(this.value)">
                <option selected>กรุณาเลือก</option>
                <option value="0-12">0-12 ปี</option>
                <option value="13-19">13-19 ปี</option>
                <option value="20-25">20-25 ปี</option>
                <option value="26-39">26-39 ปี</option>
                <option value="40-59">40-59 ปี</option>
                <option value="60up">60 ปีขึ้นไป</option>
            </select>
            <br>
            <label for="education">ระดับการศึกษา :<br></label>
            <select id="education" onclick="education(this.value)">
                <option selected>กรุณาเลือก</option>
                <option value="primary">ประถมศึกษา</option>
                <option value="highschool">มัธยมศึกษา</option>
                <option value="vocational">ปวช / ปวส / อนุปริญญา</option>
                <option value="bachelor">ปริญญาตรี</option>
                <option value="master-up">ปริญญาโท / เอก</option>
            </select>
            <br>
            <label for="career">อาชีพ :<br></label>
            <select id="career" onclick="career(this.value)">
                <option selected>กรุณาเลือก</option>
                <option value="student">นักเรียน / นิสิต / นักศึกษา</option>
                <option value="freelance">ค้าขาย / รับจ้าง / ธุรกิจส่วนตัว</option>
                <option value="employee">พนักงานบริษัท / ห้างร้าน</option>
                <option value="civil-service">รับราชการ / รัฐวิสาหกิจ</option>
                <option value="house-worker">งานบ้าน</option>
            </select>
            <br>
            <label for="marital-status">สถานภาพการสมรส :<br></label>
            <select id="marital-status" onclick="status(this.value)">
                <option selected>กรุณาเลือก</option>
                <option value="single">โสด</option>
                <option value="married">คู่</option>
                <option value="widow">พ่อหม้าย/แม่หม้าย</option>
                <option value="divorce">หย่าร้าง</option>
            </select><br>
            <button onclick="enterToTest()">เริ่มทำแบบทดสอบ</button>
        </div>
        <p id=fill-up style="color: #F65832; font-size: 18px; margin-left: 0;text-align: center;">กรุณากรอกให้ครบค่ะ</p>
    </div>

    <div id="question-frame">
        <div id="question-group">
            <div id="number-question">
                <p id="number">1</p>
                <p>.</p>
                <p id="question">ท่านรู้สึกพึงพอใจในชีวิต</p>
            </div>
            <form id="score" action="/action_page.php">
                <input type="radio" id="score4" name="score" onclick="collectScore(this.value)" value="4" checked>
                <label for="score4">มากที่สุด</label><br>
                <input type="radio" id="score3" name="score" onclick="collectScore(this.value)" value="3">
                <label for="score3">มาก</label><br>
                <input type="radio" id="score2" name="score" onclick="collectScore(this.value)" value="2">
                <label for="score2">เล็กน้อย</label><br>
                <input type="radio" id="score1" name="score" onclick="collectScore(this.value)" value="1">
                <label for="score1">ไม่เลย</label><br>
            </form>
        </div>
        <div id="page">
            <button id="previous" onclick="previous()">ย้อนกลับ</button>
            <button id="result" onclick="enterToResult()">สรุปผลคะแนน</button>
        </div>
    </div>

    <div id="result-score">
        <div class="videoWrapper">
            <iframe id="video" height="450" width="700" src="" frameborder="0"
                allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"
                allowfullscreen></iframe>
        
        <div id="btn-menu">
            <button onclick="location.href='/test.html';" style="color: #00698D;">กลับไปหน้าแบบทดสอบ</button>
            <button onclick="location.href='/happiness.html';" style="color: #F65832;">ข้อมูลเกี่ยวกับความสุข</button>
        </div>
    </div>
    <span>
        <h3>ขอบคุณที่เข้าร่วมการประเมิน</h3><br>
        <h3>แบบทดสอบความสุข</h3><br><br>
        <h2>คุณได้คะแนนรวม </h2>
        <h2 id=point></h2>
        <h2> คะแนน</h2>
        <br><br>
        <h3>การแปลผลการประเมิน</h3><br>
        <h2 id="analysis"></h2>
        <br>
        <p>เกณฑ์ปกติที่กำหนด</p>
        <p>คะแนน 0 - 43 มีสุขภาพจิตต่ำกว่าคนทั่วไป (Poor)</p>
        <p>คะแนน 44 - 50 มีสุขภาพจิตเท่ากับคนทั่วไป (Fair)</p>
        <p>คะแนนมากกว่า 50 มีสุขภาพจิตดีกว่าคนทั่วไป (Good)</p>
        <br>
        <p>คำแนะนำเบื้องต้น:</p>
        <p>ในกรณที่ท่านมีคะแนนอยู่ในกลุ่มสุขภาพจิตต่ำกว่าคนทั่วไป</p>
        <p>ท่านอาจช่วยเหลือตนเองเบื้องต้น</p>
        <p>โดยขอรับบริการปรึกษาจากสถานบริการสาธารณสุขใกล้บ้านของท่านได้</p>
        <p>หรือติดต่อสายด่วน 1323 กรมสุขภาพจิต</p>
    </span>
    </div>

    <script src="https://www.gstatic.com/firebasejs/7.13.2/firebase.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.13.2/firebase-analytics.js"></script>
    <script>
        var firebaseConfig = {
            apiKey: "AIzaSyD1ark3iF8WazBagupGswZWGRzsrdoJ5MM",
            authDomain: "subjective-well-being.firebaseapp.com",
            databaseURL: "https://subjective-well-being.firebaseio.com",
            projectId: "subjective-well-being",
            storageBucket: "subjective-well-being.appspot.com",
            messagingSenderId: "445003882411",
            appId: "1:445003882411:web:492df3948c8fbe488dfcee",
            measurementId: "G-MW0CJSMJJV"
        };
        firebase.initializeApp(firebaseConfig);
        firebase.analytics();
        function sex(value) {
            data.sex = value
        }
        function age(value) {
            data.age = value
        }
        function education(value) {
            data.education = value
        }
        function career(value) {
            data.career = value
        }
        function status(value) {
            data.status = value
        }
    </script>
    <script>
        var data = { sex: "", age: "", education: "", career: "", status: "" };
        var number = 1
        var point = []
        var questions = ["ท่านรู้สึกพึงพอใจในชีวิต", "ท่านรู้สึกสบายใจ",
            "ท่านรู้สึกเบื่อหน่ายท้อแท้กับการดำเนินชีวิตประจำวัน", "ท่านรู้สึกผิดหวังในตัวเอง",
            "ท่านรู้สึกว่าชีวิตของท่านมีแต่ความทุกข์", "ท่านสามารถทำใจยอมรับได้สำหรับปัญหาที่ยากจะแก้ไข (เมื่อมีปัญหา)",
            "ท่านมั่นใจว่าสามารถควบคุมอารมณ์ได้เมื่อมีเหตุการณ์คับขันหรือร้ายแรงเกิดขึ้น", "ท่านมั่นใจที่จะเผชิญกับเหตุการณ์ร้ายแรงที่เกิดขึ้นในชีวิต",
            "ท่านรู้สึกเห็นใจเมื่อผู้อื่นมีทุกข์", "ท่านรู้สึกเป็นสุขในการช่วยเหลือผู้อื่นที่มีปัญหา",
            "ท่านให้ความช่วยเหลือแก่ผู้อื่นเมื่อมีโอกาส", "ท่านรู้สึกภูมิใจในตนเอง",
            "ท่านรู้สึกมั่นคง ปลอดภัยเมื่ออยู่ในครอบครัว", "หากท่านป่วยหนัก ท่านเชื่อว่าครอบครัวจะดูแลท่านเป็นอย่างดี",
            "สมาชิกในครอบครัวมีความรักและผูกพันต่อกัน"
        ]

        function enterToTest() {
            if (data.age == "" || data.career == "" || data.education == "" ||
                data.sex == "" || data.status == "") {
                document.getElementById("fill-up").style.display = "block";
            } else {
                var firebaseRef = firebase.database().ref("User");
                firebaseRef.child(Date.now()).set(data)
                document.getElementById("data-user").style.display = "none";
                document.getElementById("question-frame").style.display = "block";
            }
        }



        function collectScore(score) {

            document.getElementById("previous").style.display = 'block'
            if (number == 3 || number == 4 || number == 5) {
                if (parseInt(score) == 4) {
                    point[number - 1] = 1
                } else if (parseInt(score) == 3) {
                    point[number - 1] = 2
                } else if (parseInt(score) == 2) {
                    point[number - 1] = 3
                } else if (parseInt(score) == 1) {
                    point[number - 1] = 4
                }
            } else {
                point[number - 1] = parseInt(score)
            }
            console.log(point)
            if (point[number - 1] !== undefined) {
                if (number <= 14) {
                    document.getElementById("number").innerHTML = number + 1
                    document.getElementById("question").innerHTML = questions[number]
                    document.getElementById("score").reset();
                    number++
                } else if (number == 14) {
                    document.getElementById("score").reset();
                    document.getElementById("number").innerHTML = number + 1
                    document.getElementById("question").innerHTML = questions[number]
                }
            }
            if (point[14] != undefined) {
                document.getElementById("result").style.display = 'block'
            }
        }
        function previous() {
            console.log(number)
            if (number > 1) {
                number--
                document.getElementById("number").innerHTML = number
                document.getElementById("question").innerHTML = questions[number - 1]
                document.getElementById("result").style.display = 'none'
                if (number == 1) {
                    document.getElementById("previous").style.display = 'none'
                    document.getElementById("result").style.display = 'none'
                }
            }

        }
        function enterToExplanation() {
            document.getElementById("explanation").style.display = "block";
            document.getElementById("main-test").style.display = "none";
        }

        function user() {
            document.getElementById("explanation").style.display = "none";
            document.getElementById("data-user").style.display = "block";
        }
        function enterToResult() {
            var sum = 0
            sum = point.reduce((a, b) => a + b, 0)
            document.getElementById("question-frame").style.display = 'none'
            document.getElementById("result-score").style.display = 'block';
            document.getElementById("point").innerHTML = sum
            if (sum <= 43) {
                document.getElementById("video").src = "https://www.youtube.com/embed/2U2DBjPJgI4?autoplay=1&controls=0";
                document.getElementById("analysis").innerHTML = "มีสุขภาพจิตต่ำกว่าคนทั่วไป (Poor)"
            } else if (sum >= 44 && sum <= 50) {
                document.getElementById("video").src = "https://www.youtube.com/embed/dQaI3VkSCi0?autoplay=1&controls=0";
                document.getElementById("analysis").innerHTML = "มีสุขภาพจิตเท่ากับคนทั่วไป (Fair)"
            } else if (sum > 50) {
                document.getElementById("video").src = "https://www.youtube.com/embed/UsaGgEjqNoE?autoplay=1&controls=0";
                document.getElementById("analysis").innerHTML = "มีสุขภาพจิตดีกว่าคนทั่วไป (Good)"
            }

        }

    </script>
    <script src="//code.jquery.com/jquery-1.10.2.js"></script>
    <script>
        $(function () {
            $("#header").load("header.html");
        });
    </script>
</body>

</html>